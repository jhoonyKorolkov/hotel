# Дипломная работа: Система управления пользователями, гостиницами, бронированием и техподдержкой

## Описание проекта

Данный проект представляет собой RESTful API, разработанный с использованием NestJS и MongoDB, для управления пользователями, гостиницами, бронированием номеров и техподдержкой.

---

## Основные модули

### 1. Модуль «Пользователи»

Предназначен для создания, хранения и поиска профилей пользователей. Данные пользователя хранятся в MongoDB.

#### Особенности:

- Роли пользователей: `client`, `admin`, `manager`.
- Поддержка фильтрации и поиска по частичному совпадению.

#### Основной API:

- **Регистрация**: `POST /api/client/register`
- **Вход**: `POST /api/auth/login`
- **Создание пользователя (администратор)**: `POST /api/admin/users/`
- **Получение списка пользователей**: `GET /api/admin/users/`

---

### 2. Модуль «Гостиницы»

Отвечает за управление гостиницами и их номерами. Данные хранятся в MongoDB.

#### Основной API:

- **Добавление гостиницы**: `POST /api/admin/hotels/`
- **Поиск гостиниц**: `GET /api/admin/hotels/`
- **Добавление номера**: `POST /api/admin/hotel-rooms/`
- **Поиск номеров**: `GET /api/common/hotel-rooms/`
- **Изменение описания гостиницы**: `PUT /api/admin/hotels/:id`
- **Изменение описания номера**: `PUT /api/admin/hotel-rooms/:id`

#### Особенности:

- Номера можно включать/выключать с помощью флага `isEnabled`.
- Гостиницы и номера поддерживают фильтрацию и сортировку.

---

### 3. Модуль «Брони»

Позволяет клиентам бронировать номера в гостиницах. Поддерживает хранение и проверку доступности номеров на заданные даты.

#### Основной API:

- **Бронирование номера**: `POST /api/client/reservations`
- **Получение списка броней клиента**: `GET /api/client/reservations`
- **Отмена бронирования**: `DELETE /api/client/reservations/:id`

#### Особенности:

- Администратор может получать список броней конкретного клиента.
- Поддержка проверки доступности номера на заданные даты.

---

### 4. Модуль «Чат техподдержки»

Обеспечивает связь между клиентами и менеджерами техподдержки. Данные хранятся в MongoDB.

#### Основной API:

- **Создание обращения**: `POST /api/client/support-requests/`
- **Получение обращений клиента**: `GET /api/client/support-requests/`
- **Получение обращений менеджера**: `GET /api/manager/support-requests/`
- **Отправка сообщений в чат**: `POST /api/common/support-requests/:id/messages`
- **Пометка сообщений как прочитанных**: `POST /api/common/support-requests/:id/messages/read`

#### Особенности:

- Реализована подписка на новые сообщения с использованием WebSocket.
- Поддержка хранения истории сообщений и статуса `прочитано/непрочитано`.

## Запуск проекта

Для запуска проекта с использованием Docker выполните следующую команду:

```bash
npm run docker:dev
```
